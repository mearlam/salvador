<ui:composition
        xmlns="http://www.w3.org/1999/xhtml"
        xmlns:h="http://java.sun.com/jsf/html"
        xmlns:ui="http://java.sun.com/jsf/facelets"
        xmlns:p="http://primefaces.org/ui"
        xmlns:f="http://java.sun.com/jsf/core"
        template="/WEB-INF/templates/default-layout.xhtml">

    <ui:define name="main">
        <h:form id="form">
            <p:poll interval="2" update="main" stop="#{not testRunnerBean.running}"/>

            <h:panelGroup layout="block" id="main">
                <h:panelGroup layout="block" id="running" rendered="#{testRunnerBean.running}">
                    Running tests: <h:graphicImage library="images" name="ajax-loader.gif"/>
                </h:panelGroup>
                <h:panelGroup layout="block" id="finished" rendered="#{not testRunnerBean.running}">
                    Finished!
                </h:panelGroup>

                <h2>Log:</h2>

                <div class="log">
                    <h:outputText id="log" value="#{testRunnerBean.log}" escape="false"/>
                </div>
            </h:panelGroup>

        </h:form>
    </ui:define>

</ui:composition>